@page
@model ToDoListHW.Pages.TasksModel
@using ToDoListHW.Models
@{
}

<div class="mb-3">
	<h4>Мои задачи:</h4>
	<div>
		<div class="mb3">
			<a class="btn-primary btn" asp-page="NewTask">Новая задача</a>
		</div>
		<hr />
		<div>
			<ol>
				@foreach (TaskItem item in Model.TaskService.GetAllTasks())
				{
					<li>
						<div class="card mb-3 w-75">
							<div class="card-header d-inline-flex align-items-center justify-content-between">
								<h5 class="m-1">@item.TaskName</h5>
								<span>Задача создана: @item.CreationTime</span>
								<div class="d-flex">
									<form method="get" asp-page="EditTask">
										<input type="hidden" name="taskId" value="@item.Id" />
										<button class="btn btn-info me-3">
											<i class="bi bi-pencil"></i>
										</button>
									</form>
									<form method="post" asp-page-handler="DeleteTask">
										<input type="hidden" name="taskId" value="@item.Id"/>
										<button class="btn btn-danger" type="submit">
											<i class="bi bi-x-square"></i>
										</button>
									</form>
								</div>
							</div>
							<p class="card-body">@item.TaskDescription</p>
						</div>
					</li>
				}
			</ol>
		</div>
	</div>
	
</div>
